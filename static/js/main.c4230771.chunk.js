(this.webpackJsonpovernat=this.webpackJsonpovernat||[]).push([[0],{171:function(e,t,a){e.exports=a(303)},176:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),l=a.n(o),i=(a(176),a(60)),s=a(56),c=a(8),d=a(49),m=a(338),u=a(344),v=a(35),g=a(348),_=a(156),k=a(157),f=a(15),p=a(16),b=a(345),E=a(340),h=a(337),j=a(304),O=a(336);function y(e){var t=e.searchTerm,a=(e.setTekst,e.handleChoice),o=e.komkode,l=Object(n.useState)([]),i=Object(c.a)(l,2),s=i[0],d=i[1],m=Object(n.useState)(!0),u=Object(c.a)(m,2),v=(u[0],u[1]);Object(n.useEffect)((function(){if(!(t.length<3)){var e="https://dawa.aws.dk/adgangsadresser/autocomplete?q=".concat(t,"&type=adgangsadresse&side=1&per_side=105&noformat=1&kommunekode=").concat(o,"&srid=25832");console.log(e),fetch(e).then((function(e){e.json().then((function(e){d(e)}))}))}}),[t]);var g=s.map((function(e,t){return r.a.createElement(j.a,{key:"".concat(t,"-").concat(e.tekst),value:e.tekst,button:!0,onClick:function(t){return function(e){a(e),v(!1)}(e)}},r.a.createElement(O.a,{primary:e.tekst}))}));return r.a.createElement(h.a,{component:"nav",style:{maxHeight:400,overflow:"auto"}},g)}var S=a(305),x=a(352);function w(e){var t=e.size,a=e.setAdressData,o=e.komkode,l=e.adresseTekst,i=e.setAdresseTekst,s=Object(n.useState)([]),d=Object(c.a)(s,2),u=(d[0],d[1],Object(n.useState)(!0)),g=Object(c.a)(u,2),_=g[0],k=g[1],f=Object(n.useState)(""),p=Object(c.a)(f,2),h=(p[0],p[1],Object(n.useState)({tekst:"",adgangsadresse:{x:"",y:""}})),j=Object(c.a)(h,2),O=(j[0],j[1]),w=Object(n.useState)(""),D=Object(c.a)(w,2);D[0],D[1];return r.a.createElement(m.a,{item:!0,xs:t},r.a.createElement(b.a,{id:"standard-basic",InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},"Overnatningstedets adresse"),fullWidth:!0,value:l,onChange:function(e){k(!0),i(e.target.value)},InputProps:{endAdornment:r.a.createElement(E.a,{position:"end"},r.a.createElement(S.a,{onClick:function(e){i(""),a(""),k(!1)}},r.a.createElement(x.a,null)))}}),_&&r.a.createElement(y,{searchTerm:l,setTekst:i,handleChoice:function(e){k(!1),O(e),i(e.tekst),a(e)},komkode:o}))}var D=a(346),A=Object(d.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function C(e){var t=A(),a=e.errors,n=e.closeAlert,o=r.a.createElement("ul",null,a.map((function(e,t){return r.a.createElement("li",{key:t},e)})));return r.a.createElement("div",{className:t.root},r.a.createElement(D.a,{severity:"error",onClose:function(){return n([])}},o))}var T=Object(d.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function z(e){var t=T(),a=e.closeAlert;return r.a.createElement("div",{className:t.root},r.a.createElement(D.a,{severity:"success",onClose:function(){return a(!1)}},"Formular er sendt"))}var B={ansoeger_mail:"",ansoeger_navn:"",ansoeger_tlf:"",ansoegn_indsendt:"",ansvarl_kontaktmail:"",ansvarl_kontaktpers:"",ansvarl_kontaktlf:"",overnat_adresse:"",overnat_postnr:"",overnat_by:"",overnat_antal:"",overnat_kommune:"",overnat_lokaler:"",overnat_navn:"",overnat_over_150:!1,overnat_slut_dato:new Date,overnat_slut_tid:new Date,overnat_start_dato:new Date,overnat_start_tid:new Date,overnat_tegning:"",overnat_tegning_filnavn:"",the_geom:"",x_coord:"",y_coord:"",overnat_kontaktpers:"",overnat_kontakttlf:"",bemaerkning:""},I=r.a.createContext([{},function(){},function(){},function(){}]),q=function(e){var t=Object(n.useState)(B),a=Object(c.a)(t,2),o=a[0],l=a[1],d=Object(n.useState)(""),m=Object(c.a)(d,2),u=(m[0],m[1],function(e,t){l((function(a){return Object(i.a)(Object(i.a)({},a),{},Object(s.a)({},e,t))}))});return r.a.createElement(I.Provider,{value:[o,u,function(e){Object.keys(e).forEach((function(t){u(t,e[t])}))},function(){return l(B)}]},e.children)};function F(e){var t=e.size,a=e.id,o=e.title,l=e.type,i=(e.evtHandler,Object(n.useContext)(I)),s=Object(c.a)(i,3),d=s[0],u=s[1];s[2];return r.a.createElement(m.a,{item:!0,xs:t},r.a.createElement(b.a,{id:a,type:l||"text",value:d[a],InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),onChange:function(e){return function(e,t){u(t,e.target.value)}(e,a)},fullWidth:!0}))}var L=a(353),P=a(155),M=a.n(P);function N(e){var t,a=e.setImageSrc,o=r.a.useRef(null),l=Object(n.useContext)(I),i=Object(c.a)(l,3),s=i[0],d=i[1],u=i[2],g=s.overnat_tegning_filnavn,_=new FileReader,k=function(e){e.target.result;console.log("before setImageSrc"),a(_.result),d("overnat_tegning",_.result.replace(/^data:.+;base64,/,""))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{item:!0,xs:10},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.74)"},variant:"subtitle1",component:"h3"},"Vedh\xe6ft dokumentation: Der skal vedh\xe6ftes driftsjournal og bel\xe6gningsplan (Bel\xe6gningsplan kun for overnatninger i rum til mere end 50 personer)"," ")),r.a.createElement(m.a,{item:!0,xs:2},r.a.createElement("label",{htmlFor:"upload-photo"},r.a.createElement("input",{style:{display:"none"},id:"upload-photo",name:"upload-photo",type:"file",accept:".jpeg,.jpg,.png,.pdf",onChange:function(e){console.log("file upload: ",e.target.files[0].name);var t=e.target.files[0];e.target.files[0].name;d("overnat_tegning_filnavn",e.target.files[0].name),t&&(_.onload=k,_.readAsDataURL(t))},ref:o}),r.a.createElement(S.a,{color:"primary","aria-label":"upload fil",onClick:function(e){return o.current&&o.current.click()}},r.a.createElement(M.a,null)))),r.a.createElement(m.a,{item:!0,xs:5},g&&r.a.createElement(L.a,{variant:"outlined",label:(t=g,t.length>25?"..."+t.substring(t.length-22):t),size:"medium",color:"secondary",onDelete:function(e){return u({overnat_tegning_filnavn:""}),o.current.value="",void a("")}})))}var V=a(341),K=a(349);function R(e){var t=e.size,a=e.id,o=e.title,l=e.label,i=Object(n.useContext)(I),s=Object(c.a)(i,3),d=s[0],u=s[1],g=s[2];return r.a.createElement(m.a,{item:!0,xs:t},r.a.createElement(V.a,{format:"yyyy-MM-dd",margin:"normal",id:a,label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),value:d[a],onChange:function(e){if(!(e<new Date))switch(a){case"overnat_start_dato":var t=new Date(e),n=new Date(d.overnat_slut_dato),r=n<t?t:n;g({overnat_start_dato:t,overnat_slut_dato:r,overnat_start_tid:t,overnat_slut_tid:r});break;case"overnat_slut_dato":if(new Date(e)<new Date(d.overnat_start_dato))return;u("overnat_slut_dato",new Date(e)),u("overnat_slut_tid",new Date(e));break;default:return}},KeyboardButtonProps:{"aria-label":{label:l}},cancelLabel:"Annulere"}))}function U(e){var t=e.size,a=e.id,o=e.title,l=(e.label,Object(n.useContext)(I)),i=Object(c.a)(l,3),s=i[0],d=i[1];i[2];return r.a.createElement(m.a,{item:!0,xs:t},r.a.createElement(K.a,{margin:"normal",id:a,label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),ampm:!1,value:s[a],onChange:function(e){d(a,new Date(e))},KeyboardButtonProps:{"aria-label":"\xe6ndre tidspunkt"}}))}function W(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{id:"overnat_start_dato",title:"Start dato",size:6}),r.a.createElement(U,{id:"overnat_start_tid",title:"Start tidspunkt",size:6}),r.a.createElement(R,{id:"overnat_slut_dato",title:"Slut dato",size:6}),r.a.createElement(U,{id:"overnat_slut_tid",title:"Slut tidspunkt",size:6}))}var G=a(343),H=[{value:"Aarhus",nummer:751},{value:"Odder",nummer:727},{value:"Sams\xf8",nummer:741},{value:"Skanderborg",nummer:746}];function J(e){var t=e.size,a=e.id,o=e.title,l=e.setKomkode,i=e.setAdresseTekst,s=Object(n.useContext)(I),d=Object(c.a)(s,3),u=d[0],g=(d[1],d[2]);return r.a.createElement(m.a,{item:!0,xs:t},r.a.createElement(b.a,{id:a,select:!0,value:u.overnat_kommune,InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),onChange:function(e){var t=e.target.value.split("_"),a=Object(c.a)(t,2),n=a[0];a[1];g({overnat_kommune:e.target.value,overnat_adresse:"",the_geom:""}),l(n),i("")},fullWidth:!0},H.map((function(e){return r.a.createElement(G.a,{key:e.nummer,value:"".concat(e.nummer,"_").concat(e.value)},e.value)}))))}var $=a(342);function Q(e){var t=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{item:!0,xs:2}),r.a.createElement(m.a,{item:!0,xs:8},r.a.createElement($.a,{variant:"contained",color:"primary",onClick:t},"Godkend og indsend anmeldelse om midlertidig overnatning")),r.a.createElement(m.a,{item:!0,xs:2}))}var X=a(105),Y=a.n(X),Z=Object(d.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,margin:25}}})),ee=function(e){var t=new Date(e).toISOString().split("T")[0],a=new Date(e).toTimeString().split(" ")[0];return"".concat(t," ").concat(a)};var te=function(){var e=Object(n.useContext)(I),t=Object(c.a)(e,4),a=t[0],o=t[1],l=t[2],d=t[3],b=(r.a.useRef(null),Z(),Object(n.useState)({bemaerkning:"",ansoeger_mail:"",ansoeger_navn:"",ansoeger_tlf:"",ansoegn_indsendt:"",ansvarl_kontaktmail:"",ansvarl_kontaktpers:"",ansvarl_kontaktlf:"",overnat_adresse:"",overnat_antal:"",overnat_kommune:"",overnat_lokaler:"",overnat_navn:"",overnat_over_150:!1,overnat_slut_dato:(new Date).toISOString(),overnat_slut_tid:(new Date).toISOString(),overnat_start_dato:(new Date).toISOString(),overnat_start_tid:(new Date).toISOString(),overnat_tegning:"",overnat_tegning_filnavn:"",the_geom:"",gid:"",file:""})),E=Object(c.a)(b,2),h=(E[0],E[1],p.b().shape(Object(s.a)({overnat_kommune:p.c().required("V\xe6lg kommune, for at kunne v\xe6lge adresse"),overnat_adresse:p.c().required("Overnatningstedets adresse er et kr\xe6vet felt"),overnat_navn:p.c().required("Overnatningstedets navn er et kr\xe6vet felt"),overnat_lokaler:p.c().required("Lokaler er et kr\xe6vet felt"),overnat_over_150:p.c().required(),bemaerkning:p.c(),overnat_antal:p.a("Antal overnattende skal udfyldes med et tal").typeError("Antal overnattende skal udfyldes med et tal").positive("Antal overnattende skal udfyldes med et positivt tal.").integer("Antal overnattende skal udfyldes med et tal"),ansoeger_navn:p.c().required("Anmelder navn er et kr\xe6vet felt"),ansoeger_tlf:p.c().matches(/^[0-9]{8}$/,"Anmelder tlf. skal have 8 tal"),ansoeger_mail:p.c().email("Anmelder mail skal v\xe6re en valid email adresse").required("Anmelder mail er et kr\xe6vet felt"),ansvarl_kontaktpers:p.c().required("Navn p\xe5 kontaktperson under overnatningen er et kr\xe6vet felt"),ansvarl_kontaktlf:p.c().matches(/^[0-9]{8}$/,"Tlf. til kontaktperson skal have 8 tal"),ansvarl_kontaktmail:p.c().email("Mail til kontaktperson skal v\xe6re en valid email adresse").required("Mail til kontaktperson mail er et kr\xe6vet felt"),overnat_slut_dato:p.c().required(),overnat_slut_tid:p.c().required(),overnat_start_dato:p.c().required(),overnat_start_tid:p.c().required()},"bemaerkning",p.c()))),j=Object(n.useState)("751|741|727|746"),O=Object(c.a)(j,2),y=O[0],S=O[1],x=Object(n.useState)(""),D=Object(c.a)(x,2),A=(D[0],D[1]),T=Object(n.useState)([]),B=Object(c.a)(T,2),q=B[0],L=B[1],P=Object(n.useState)(!1),M=Object(c.a)(P,2),V=M[0],K=M[1],R=Object(n.useState)(""),U=Object(c.a)(R,2),G=U[0],H=U[1];return r.a.createElement(f.a,{utils:_.a,locale:k.a},r.a.createElement(u.a,{maxWidth:"sm"},r.a.createElement(v.a,{variant:"h6",gutterBottom:!0},"Anmeldelse af midlertidig overnatning"),q.length>0&&r.a.createElement(C,{errors:q,closeAlert:L}),V&&r.a.createElement(z,{closeAlert:K}),r.a.createElement(m.a,{container:!0,spacing:3},r.a.createElement(J,{size:12,id:"overnat_kommune",title:"Hvilken kommune",setKomkode:S,setAdresseTekst:H}),r.a.createElement(w,{size:12,setAdressData:function(e){if(""===e)l({overnat_adresse:"",overnat_postnr:"",overnat_by:"",the_geom:"",x_coord:"",y_coord:""});else{var t=e.tekst.split(","),a=t.length>0?t[0]:e.tekst;l({overnat_adresse:a,overnat_postnr:e.adgangsadresse.postnr,overnat_by:e.adgangsadresse.postnrnavn,the_geom:"ST_setsrid(ST_MakePoint(".concat(e.adgangsadresse.x,",").concat(e.adgangsadresse.y,"),25832)"),x_coord:e.adgangsadresse.x,y_coord:e.adgangsadresse.y})}},komkode:y,adresseTekst:G,setAdresseTekst:H}),r.a.createElement(F,{size:12,id:"overnat_navn",title:"Overnatningstedets navn"}),r.a.createElement(F,{size:12,id:"overnat_lokaler",title:"Lokaler (navn p\xe5 de lokaler overnatningen foreg\xe5r i)"}),r.a.createElement(m.a,{item:!0,xs:8},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.74)"},variant:"subtitle1",component:"h3"},"Overnatning for flere end 50 i samme rum"," ")),r.a.createElement(m.a,{item:!0,xs:4},r.a.createElement(g.a,{color:"primary",checked:a.overnat_over_150,onChange:function(e){console.log("handleCheckbox => ",e.target.value),o("overnat_over_150",e.target.checked)}})),a.overnat_over_150&&r.a.createElement(m.a,{item:!0,xs:12},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.74)",fontSize:"0.9em"}},"Overnatninger i rum til mere end 50 personer skal ske efter en bel\xe6gningsplan, s\xe5 det sikres, at de forn\xf8dne flugtvejspassager til udgangsd\xf8re ikke sp\xe6rres af sovepladser, inventar, bagage m.m. Bel\xe6gningsplanen skal oph\xe6nges i overnatningslokalet. Bel\xe6gningsplaner til rum for midlertidig overnatning kan udf\xf8res som beskrevet i bilag 11d og 13 til vejledningen.",r.a.createElement("p",null,r.a.createElement("a",{href:"https://bygningsreglementet.dk/-/media/Br/Kap_5_Brand/Vejledninger/Generel-vejledning/Bilag-11-abcde/211219-Bilag-11d-Vejledning-for-bel%C3%A6gningsplaner-ved-midlertidige-overnatning.pdf"},"Bilag 11d - Vejledning for bel\xe6gningsplaner ved midlertidig overnatning")),r.a.createElement("p",null,r.a.createElement("a",{href:"https://bygningsreglementet.dk/-/media/Br/Kap_5_Brand/Vejledninger/Bilag-13-Udfaerdigelse-af-planer-i-forhold-til-brand/Bilag-13-Udfrdigelse-af-planer-i-forhold-til-brand-ver-11.pdf"},"Bilag 13: Udf\xe6rdigelse af planer i forhold til brand")))),r.a.createElement(N,{setImageSrc:A}),r.a.createElement(F,{size:12,id:"overnat_antal",type:"number",title:"Antal overnattende"}),r.a.createElement(W,null),r.a.createElement(F,{size:12,id:"ansoeger_navn",title:"Anmelder navn"}),r.a.createElement(F,{type:"number",size:6,id:"ansoeger_tlf",title:"Anmelder tlf."}),r.a.createElement(F,{size:6,id:"ansoeger_mail",title:"Anmelder mail"}),r.a.createElement(m.a,{item:!0,xs:12}),r.a.createElement(F,{size:12,id:"ansvarl_kontaktpers",title:"Navn p\xe5 kontaktperson under overnatningen"}),r.a.createElement(F,{type:"number",size:6,id:"ansvarl_kontaktlf",title:"Tlf. til kontaktperson"}),r.a.createElement(F,{size:6,id:"ansvarl_kontaktmail",title:"Mail til kontaktperson"}),r.a.createElement(F,{size:12,id:"bemaerkning",title:"Bem\xe6rkninger"}),r.a.createElement(m.a,{item:!0,xs:12},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.74)",fontSize:"0.9em"}},"Den ansvarlige for overnatningen forpligter sig til at overholde kravene i Bygningsreglementet \xa7 152 a samt tilh\xf8rende vejledninger:",r.a.createElement("p",null,"1. Der er tale om kortvarigt ophold p\xe5 op til 5 d\xf8gn."),r.a.createElement("p",null,"2. Der er tilstr\xe6kkelige alarmerings-, evakuerings- og redningsmuligheder."),r.a.createElement("p",null,"3. Der i byggeri, hvor der midlertidigt overnatter mere end 150 personer, skal v\xe6re mindst \xe9n fast v\xe5gen vagt."),r.a.createElement("p",null,"4. Der udarbejdes en driftsplan efter bestemmelserne i \xa7 83, som sikrer, at der opn\xe5s et sikkerhedsniveau som beskrevet i \xa7 82."),r.a.createElement("p",null,"5. Der er udarbejdet ordensregler om forebyggelse af brand."),r.a.createElement("p",null,"6. Der er udarbejdet en brand- og evakueringsinstruks."),r.a.createElement("p",null,"7. Der er udarbejdet en bel\xe6gningsplan for lokaler, hvor der overnatter mere end 50 personer."))),r.a.createElement(Q,{onClick:function(e){var t=Object(i.a)(Object(i.a)({},a),{},{ansoegn_indsendt:new Date});console.log("ans\xf8gning",t),h.validate(t,{abortEarly:!1}).then((function(e){!function(e){var t=Object.keys(e),a=t.join(","),n=t.map((function(t){return"overnat_start_dato"===t||"overnat_slut_dato"===t||"overnat_start_tid"===t||"ansoegn_indsendt"===t||"overnat_slut_tid"===t?"'".concat(ee(e[t]),"'"):"the_geom"===t?"".concat(e[t]):"'".concat(e[t],"'")})).join(",");"INSERT INTO faelles.midlertidig_overnatning(".concat(a,") VALUES(").concat(n,")")}(t);(function(e){return e.overnat_over_150=e.overnat_over_150.toString(),Y.a.post("https://geocloud.beredskabskort.dk/extensions/beredskab/controller/formular",e)})(t).then((function(e){K(!0),L([]),H(""),S("751|741|727|746"),d(),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(e){L(["Der var fejl ved indsending..."]),K(!1),window.scrollTo({top:0,behavior:"smooth"})}))})).catch((function(e){console.log(e.errors),L(e.errors),window.scrollTo({top:0,behavior:"smooth"})}))}}))))};a(302);var ae=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(q,null,r.a.createElement(te,null)))},ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,354)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),o(e),l(e)}))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),ne()}},[[171,1,2]]]);
//# sourceMappingURL=main.c4230771.chunk.js.map