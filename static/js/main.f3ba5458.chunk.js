(this.webpackJsonpovernat=this.webpackJsonpovernat||[]).push([[0],{171:function(e,t,n){e.exports=n(303)},176:function(e,t,n){},302:function(e,t,n){},303:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),l=n.n(o),i=(n(176),n(60)),s=n(56),c=n(8),d=n(49),m=n(338),u=n(344),v=n(35),g=n(348),k=n(156),_=n(157),f=n(15),b=n(16),p=n(345),E=n(340),h=n(337),j=n(304),O=n(336);function y(e){var t=e.searchTerm,n=(e.setTekst,e.handleChoice),o=e.komkode,l=Object(a.useState)([]),i=Object(c.a)(l,2),s=i[0],d=i[1],m=Object(a.useState)(!0),u=Object(c.a)(m,2),v=(u[0],u[1]);Object(a.useEffect)((function(){if(!(t.length<3)){var e="https://dawa.aws.dk/adgangsadresser/autocomplete?q=".concat(t,"&type=adgangsadresse&side=1&per_side=105&noformat=1&kommunekode=").concat(o,"&srid=25832");console.log(e),fetch(e).then((function(e){e.json().then((function(e){d(e)}))}))}}),[t]);var g=s.map((function(e,t){return r.a.createElement(j.a,{key:"".concat(t,"-").concat(e.tekst),value:e.tekst,button:!0,onClick:function(t){return function(e){n(e),v(!1)}(e)}},r.a.createElement(O.a,{primary:e.tekst}))}));return r.a.createElement(h.a,{component:"nav",style:{maxHeight:400,overflow:"auto"}},g)}var S=n(305),w=n(352);function x(e){var t=e.size,n=e.setAdressData,o=e.komkode,l=e.adresseTekst,i=e.setAdresseTekst,s=Object(a.useState)([]),d=Object(c.a)(s,2),u=(d[0],d[1],Object(a.useState)(!0)),g=Object(c.a)(u,2),k=g[0],_=g[1],f=Object(a.useState)(""),b=Object(c.a)(f,2),h=(b[0],b[1],Object(a.useState)({tekst:"",adgangsadresse:{x:"",y:""}})),j=Object(c.a)(h,2),O=(j[0],j[1]),x=Object(a.useState)(""),A=Object(c.a)(x,2);A[0],A[1];return r.a.createElement(m.a,{item:!0,xs:t},r.a.createElement(p.a,{id:"standard-basic",InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},"Overnatningstedets adresse"),fullWidth:!0,value:l,onChange:function(e){_(!0),i(e.target.value)},InputProps:{endAdornment:r.a.createElement(E.a,{position:"end"},r.a.createElement(S.a,{onClick:function(e){i(""),n(""),_(!1)}},r.a.createElement(w.a,null)))}}),k&&r.a.createElement(y,{searchTerm:l,setTekst:i,handleChoice:function(e){_(!1),O(e),i(e.tekst),n(e)},komkode:o}))}var A=n(346),D=Object(d.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function C(e){var t=D(),n=e.errors,a=e.closeAlert,o=r.a.createElement("ul",null,n.map((function(e,t){return r.a.createElement("li",{key:t},e)})));return r.a.createElement("div",{className:t.root},r.a.createElement(A.a,{severity:"error",onClose:function(){return a([])}},o))}var z=Object(d.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function T(e){var t=z(),n=e.closeAlert;return r.a.createElement("div",{className:t.root},r.a.createElement(A.a,{severity:"success",onClose:function(){return n(!1)}},"Formular er sendt"))}var I={ansoeger_mail:"",ansoeger_navn:"",ansoeger_tlf:"",ansoegn_indsendt:"",ansvarl_kontaktmail:"",ansvarl_kontaktpers:"",ansvarl_kontaktlf:"",overnat_adresse:"",overnat_postnr:"",overnat_by:"",overnat_antal:"",overnat_kommune:"",overnat_lokaler:"",overnat_navn:"",overnat_over_150:!1,overnat_slut_dato:new Date,overnat_slut_tid:new Date,overnat_start_dato:new Date,overnat_start_tid:new Date,overnat_tegning:"",overnat_tegning_filnavn:"",the_geom:"",x_coord:"",y_coord:"",overnat_kontaktpers:"",overnat_kontakttlf:"",bemaerkning:""},q=r.a.createContext([{},function(){},function(){},function(){}]),B=function(e){var t=Object(a.useState)(I),n=Object(c.a)(t,2),o=n[0],l=n[1],d=Object(a.useState)(""),m=Object(c.a)(d,2),u=(m[0],m[1],function(e,t){l((function(n){return Object(i.a)(Object(i.a)({},n),{},Object(s.a)({},e,t))}))});return r.a.createElement(q.Provider,{value:[o,u,function(e){Object.keys(e).forEach((function(t){u(t,e[t])}))},function(){return l(I)}]},e.children)};function P(e){var t=e.size,n=e.id,o=e.title,l=e.type,i=(e.evtHandler,Object(a.useContext)(q)),s=Object(c.a)(i,3),d=s[0],u=s[1];s[2];return r.a.createElement(m.a,{item:!0,xs:t},r.a.createElement(p.a,{id:n,type:l||"text",value:d[n],InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),onChange:function(e){return function(e,t){u(t,e.target.value)}(e,n)},fullWidth:!0}))}var F=n(353),L=n(155),M=n.n(L);function N(e){var t,n=e.setImageSrc,o=r.a.useRef(null),l=Object(a.useContext)(q),i=Object(c.a)(l,3),s=i[0],d=i[1],u=i[2],g=s.overnat_tegning_filnavn,k=new FileReader,_=function(e){e.target.result;console.log("before setImageSrc"),n(k.result),d("overnat_tegning",k.result.replace(/^data:.+;base64,/,""))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{item:!0,xs:10},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.74)"},variant:"subtitle1",component:"h3"},"Vedh\xe6ft dokumentation: Der kan her vedh\xe6ftes driftsjournal og bel\xe6gningsplan "," ")),r.a.createElement(m.a,{item:!0,xs:2},r.a.createElement("label",{htmlFor:"upload-photo"},r.a.createElement("input",{style:{display:"none"},id:"upload-photo",name:"upload-photo",type:"file",accept:".jpeg,.jpg,.png,.pdf",onChange:function(e){console.log("file upload: ",e.target.files[0].name);var t=e.target.files[0];e.target.files[0].name;d("overnat_tegning_filnavn",e.target.files[0].name),t&&(k.onload=_,k.readAsDataURL(t))},ref:o}),r.a.createElement(S.a,{color:"primary","aria-label":"upload fil",onClick:function(e){return o.current&&o.current.click()}},r.a.createElement(M.a,null)))),r.a.createElement(m.a,{item:!0,xs:5},g&&r.a.createElement(F.a,{variant:"outlined",label:(t=g,t.length>25?"..."+t.substring(t.length-22):t),size:"medium",color:"secondary",onDelete:function(e){return u({overnat_tegning_filnavn:""}),o.current.value="",void n("")}})))}var K=n(341),R=n(349);function V(e){var t=e.size,n=e.id,o=e.title,l=e.label,i=Object(a.useContext)(q),s=Object(c.a)(i,3),d=s[0],u=s[1],g=s[2];return r.a.createElement(m.a,{item:!0,xs:t},r.a.createElement(K.a,{format:"yyyy-MM-dd",margin:"normal",id:n,label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),value:d[n],onChange:function(e){if(!(e<new Date))switch(n){case"overnat_start_dato":var t=new Date(e),a=new Date(d.overnat_slut_dato),r=new Date(t);r.setDate(t.getDate()+7);var o=a>r?r:a;g({overnat_start_dato:t,overnat_slut_dato:o,overnat_start_tid:t,overnat_slut_tid:o});break;case"overnat_slut_dato":if(new Date(e)<new Date(d.overnat_start_dato))return;var l=new Date(d.overnat_start_dato);l.setDate(d.overnat_start_dato.getDate()+7);var i=new Date(e)>l?l:new Date(e);u("overnat_slut_dato",i),u("overnat_slut_tid",i);break;default:return}},KeyboardButtonProps:{"aria-label":{label:l}},cancelLabel:"Annulere"}))}function W(e){var t=e.size,n=e.id,o=e.title,l=(e.label,Object(a.useContext)(q)),i=Object(c.a)(l,3),s=i[0],d=i[1];i[2];return r.a.createElement(m.a,{item:!0,xs:t},r.a.createElement(R.a,{margin:"normal",id:n,label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),ampm:!1,value:s[n],onChange:function(e){d(n,new Date(e))},KeyboardButtonProps:{"aria-label":"\xe6ndre tidspunkt"}}))}function H(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{id:"overnat_start_dato",title:"Start dato",size:6}),r.a.createElement(W,{id:"overnat_start_tid",title:"Start tidspunkt",size:6}),r.a.createElement(V,{id:"overnat_slut_dato",title:"Slut dato (max. 7 d\xf8gn)",size:6}),r.a.createElement(W,{id:"overnat_slut_tid",title:"Slut tidspunkt",size:6}))}var G=n(343),J=[{value:"Aarhus",nummer:751},{value:"Odder",nummer:727},{value:"Sams\xf8",nummer:741},{value:"Skanderborg",nummer:746}];function U(e){var t=e.size,n=e.id,o=e.title,l=e.setKomkode,i=e.setAdresseTekst,s=Object(a.useContext)(q),d=Object(c.a)(s,3),u=d[0],g=(d[1],d[2]);return r.a.createElement(m.a,{item:!0,xs:t},r.a.createElement(p.a,{id:n,select:!0,value:u.overnat_kommune,InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),onChange:function(e){var t=e.target.value.split("_"),n=Object(c.a)(t,2),a=n[0];n[1];g({overnat_kommune:e.target.value,overnat_adresse:"",the_geom:""}),l(a),i("")},fullWidth:!0},J.map((function(e){return r.a.createElement(G.a,{key:e.nummer,value:"".concat(e.nummer,"_").concat(e.value)},e.value)}))))}var $=n(342);function Q(e){var t=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{item:!0,xs:2}),r.a.createElement(m.a,{item:!0,xs:8},r.a.createElement($.a,{variant:"contained",color:"primary",onClick:t},"Godkend og indsend anmeldelse om midlertidig overnatning")),r.a.createElement(m.a,{item:!0,xs:2}))}var X=n(105),Y=n.n(X),Z=Object(d.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,margin:25}}})),ee=function(e){var t=new Date(e).toISOString().split("T")[0],n=new Date(e).toTimeString().split(" ")[0];return"".concat(t," ").concat(n)};var te=function(){var e=Object(a.useContext)(q),t=Object(c.a)(e,4),n=t[0],o=t[1],l=t[2],d=t[3],p=(r.a.useRef(null),Z(),Object(a.useState)({bemaerkning:"",ansoeger_mail:"",ansoeger_navn:"",ansoeger_tlf:"",ansoegn_indsendt:"",ansvarl_kontaktmail:"",ansvarl_kontaktpers:"",ansvarl_kontaktlf:"",overnat_adresse:"",overnat_antal:"",overnat_kommune:"",overnat_lokaler:"",overnat_navn:"",overnat_over_150:!1,overnat_slut_dato:(new Date).toISOString(),overnat_slut_tid:(new Date).toISOString(),overnat_start_dato:(new Date).toISOString(),overnat_start_tid:(new Date).toISOString(),overnat_tegning:"",overnat_tegning_filnavn:"",the_geom:"",gid:"",file:""})),E=Object(c.a)(p,2),h=(E[0],E[1],b.b().shape(Object(s.a)({overnat_kommune:b.c().required("V\xe6lg kommune, for at kunne v\xe6lge adresse"),overnat_adresse:b.c().required("Overnatningstedets adresse er et kr\xe6vet felt"),overnat_navn:b.c().required("Overnatningstedets navn er et kr\xe6vet felt"),overnat_lokaler:b.c().required("Lokaler er et kr\xe6vet felt"),overnat_over_150:b.c().required(),bemaerkning:b.c(),overnat_antal:b.a("Antal overnattende skal udfyldes med et tal").typeError("Antal overnattende skal udfyldes med et tal").positive("Antal overnattende skal udfyldes med et positivt tal.").integer("Antal overnattende skal udfyldes med et tal"),ansoeger_navn:b.c().required("Anmelder navn er et kr\xe6vet felt"),ansoeger_tlf:b.c().matches(/^[0-9]{8}$/,"Anmelder tlf. skal have 8 tal"),ansoeger_mail:b.c().email("Anmelder mail skal v\xe6re en valid email adresse").required("Anmelder mail er et kr\xe6vet felt"),ansvarl_kontaktpers:b.c().required("Navn p\xe5 kontaktperson under overnatningen er et kr\xe6vet felt"),ansvarl_kontaktlf:b.c().matches(/^[0-9]{8}$/,"Tlf. til kontaktperson skal have 8 tal"),ansvarl_kontaktmail:b.c().email("Mail til kontaktperson skal v\xe6re en valid email adresse").required("Mail til kontaktperson mail er et kr\xe6vet felt"),overnat_slut_dato:b.c().required(),overnat_slut_tid:b.c().required(),overnat_start_dato:b.c().required(),overnat_start_tid:b.c().required()},"bemaerkning",b.c()))),j=Object(a.useState)("751|741|727|746"),O=Object(c.a)(j,2),y=O[0],S=O[1],w=Object(a.useState)(""),A=Object(c.a)(w,2),D=(A[0],A[1]),z=Object(a.useState)([]),I=Object(c.a)(z,2),B=I[0],F=I[1],L=Object(a.useState)(!1),M=Object(c.a)(L,2),K=M[0],R=M[1],V=Object(a.useState)(""),W=Object(c.a)(V,2),G=W[0],J=W[1];return r.a.createElement(f.a,{utils:k.a,locale:_.a},r.a.createElement(u.a,{maxWidth:"sm"},r.a.createElement(v.a,{variant:"h6",gutterBottom:!0},"Anmeldelse af midlertidig overnatning"),B.length>0&&r.a.createElement(C,{errors:B,closeAlert:F}),K&&r.a.createElement(T,{closeAlert:R}),r.a.createElement(m.a,{container:!0,spacing:3},r.a.createElement(U,{size:12,id:"overnat_kommune",title:"Hvilken kommune",setKomkode:S,setAdresseTekst:J}),r.a.createElement(x,{size:12,setAdressData:function(e){if(""===e)l({overnat_adresse:"",overnat_postnr:"",overnat_by:"",the_geom:"",x_coord:"",y_coord:""});else{var t=e.tekst.split(","),n=t.length>0?t[0]:e.tekst;l({overnat_adresse:n,overnat_postnr:e.adgangsadresse.postnr,overnat_by:e.adgangsadresse.postnrnavn,the_geom:"ST_setsrid(ST_MakePoint(".concat(e.adgangsadresse.x,",").concat(e.adgangsadresse.y,"),25832)"),x_coord:e.adgangsadresse.x,y_coord:e.adgangsadresse.y})}},komkode:y,adresseTekst:G,setAdresseTekst:J}),r.a.createElement(P,{size:12,id:"overnat_navn",title:"Overnatningstedets navn"}),r.a.createElement(P,{size:12,id:"overnat_lokaler",title:"Lokaler (navn p\xe5 de lokaler overnatningen foreg\xe5r i)"}),r.a.createElement(m.a,{item:!0,xs:8},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.74)"},variant:"subtitle1",component:"h3"},"Overnatning for flere end 50 i samme rum"," ")),r.a.createElement(m.a,{item:!0,xs:4},r.a.createElement(g.a,{color:"primary",checked:n.overnat_over_150,onChange:function(e){console.log("handleCheckbox => ",e.target.value),o("overnat_over_150",e.target.checked)}})),n.overnat_over_150&&r.a.createElement(m.a,{item:!0,xs:12},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.74)",fontSize:"0.9em"}},"Overnatninger i rum til mere end 50 personer skal ske efter en bel\xe6gningsplan, s\xe5 det sikres, at de forn\xf8dne flugtvejspassager til udgangsd\xf8re ikke sp\xe6rres af sovepladser, inventar, bagage m.m. Bel\xe6gningsplanen skal oph\xe6nges i overnatningslokalet. Bel\xe6gningsplaner til rum for midlertidig overnatning kan udf\xf8res som beskrevet i ",r.a.createElement("a",{href:"https://bygningsreglementet.dk/-/media/Br/Kap_5_Brand/Vejledninger/Bilag-11b--Praccepterede-lsninger-for-midlertidig-overnatning-i-bygninger--version-10.pdf"},"Bilag 11b: Pr\xe6-acceptable l\xf8sninger for midlertidige overnatninger i bygninger")," \u2013 appendiks C: Bel\xe6gningsplan")),r.a.createElement(P,{size:12,id:"overnat_antal",type:"number",title:"Antal overnattende"}),r.a.createElement(m.a,{item:!0,xs:12},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.74)",fontSize:"0.9em"}},"I bygningsafsnit, der indrettes til flere end 150 overnattende personer, skal der v\xe6re en fast, v\xe5gen vagt, som skal foretage inspektionsrunder.")),r.a.createElement(H,null),r.a.createElement(P,{size:12,id:"ansoeger_navn",title:"Anmelder navn"}),r.a.createElement(P,{type:"number",size:6,id:"ansoeger_tlf",title:"Anmelder tlf."}),r.a.createElement(P,{size:6,id:"ansoeger_mail",title:"Anmelder mail"}),r.a.createElement(m.a,{item:!0,xs:12}),r.a.createElement(P,{size:12,id:"ansvarl_kontaktpers",title:"Navn p\xe5 kontaktperson under overnatningen"}),r.a.createElement(P,{type:"number",size:6,id:"ansvarl_kontaktlf",title:"Tlf. til kontaktperson"}),r.a.createElement(P,{size:6,id:"ansvarl_kontaktmail",title:"Mail til kontaktperson"}),r.a.createElement(P,{size:12,id:"bemaerkning",title:"Bem\xe6rkninger"}),r.a.createElement(N,{setImageSrc:D}),r.a.createElement(m.a,{item:!0,xs:12},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.74)",fontSize:"0.9em"}},"Den ansvarlige for overnatningen forpligter sig til f\xf8lgende:",r.a.createElement("ul",null,r.a.createElement("li",null,"At der rettidigt er fremsendt meddelelse om den midlertidige overnatning til kommunalbestyrelsen."),r.a.createElement("li",null,"At den midlertidige overnatning sker i overensstemmelse med retningslinjerne i ",r.a.createElement("a",{href:"https://www.bygningsreglementet.dk/media/vy1d0uyr/bilag-11bversion-11-uden-ndringsmarkeringer-a.pdf"},"Bilag 11b: Pr\xe6-acceptable l\xf8sninger for midlertidige overnatninger i bygninger")," eller retningslinjerne i byggeriets DKV-plan for midlertidig overnatning."),r.a.createElement("li",null,"At ordensregler er udarbejdet som opslag, der er oph\xe6ngt i tilknytning til brand- og evakueringsinstruksen."),r.a.createElement("li",null,"At der for overnatninger med b\xf8rn og unge under 18 \xe5r er en myndig person til stede ved overnatningen og at den eller de myndige personer ved midlertidig overnatning for b\xf8rn og unge under 18 \xe5r er bekendt med ordensreglerne."),r.a.createElement("li",null,"At der er udarbejdet og oph\xe6ngt brand- og evakueringsinstruks."),r.a.createElement("li",null,"At der er udarbejdet driftsjournal, som kontrolleres hver dag ved overnatning over flere d\xf8gn. "),r.a.createElement("li",null,"At der er udarbejdet og oph\xe6ngt en bel\xe6gningsplan for overnatningslokaler til flere end 50 overnattende personer."),r.a.createElement("li",null,"At der i bygningsafsnit, der indrettes til flere end 150 overnattende personer, etableres fast, v\xe5gen vagt, som skal foretage inspektionsrunder."),r.a.createElement("li",null,"At den/de faste v\xe5gne, vagter er instrueret om deres opgave, alarmeringsmuligheder, brand- og evakueringsinstruks mv."),r.a.createElement("li",null,"At hvis ansvar er overdraget til tredjepart, skal det sikres at den ansvarlige for overnatningen har modtaget kopi af anmeldelsen og godkendt indholdet.")))),r.a.createElement(Q,{onClick:function(e){var t=Object(i.a)(Object(i.a)({},n),{},{ansoegn_indsendt:new Date});console.log("ans\xf8gning",t),h.validate(t,{abortEarly:!1}).then((function(e){!function(e){var t=Object.keys(e),n=t.join(","),a=t.map((function(t){return"overnat_start_dato"===t||"overnat_slut_dato"===t||"overnat_start_tid"===t||"ansoegn_indsendt"===t||"overnat_slut_tid"===t?"'".concat(ee(e[t]),"'"):"the_geom"===t?"".concat(e[t]):"'".concat(e[t],"'")})).join(",");"INSERT INTO faelles.midlertidig_overnatning(".concat(n,") VALUES(").concat(a,")")}(t);(function(e){return e.overnat_over_150=e.overnat_over_150.toString(),Y.a.post("https://geocloud.beredskabskort.dk/extensions/beredskab/controller/formular",e)})(t).then((function(e){R(!0),F([]),J(""),S("751|741|727|746"),d(),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(e){F(["Der var fejl ved indsending..."]),R(!1),window.scrollTo({top:0,behavior:"smooth"})}))})).catch((function(e){console.log(e.errors),F(e.errors),window.scrollTo({top:0,behavior:"smooth"})}))}}))))};n(302);var ne=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(B,null,r.a.createElement(te,null)))},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,354)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),o(e),l(e)}))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),ae()}},[[171,1,2]]]);
//# sourceMappingURL=main.f3ba5458.chunk.js.map