(this.webpackJsonpovernat=this.webpackJsonpovernat||[]).push([[0],{171:function(e,t,a){e.exports=a(303)},176:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),o=a.n(l),i=(a(176),a(59)),s=a(8),c=a(49),d=a(338),m=a(344),u=a(35),v=a(348),g=a(156),_=a(157),f=a(15),k=a(18),p=a(345),b=a(340),E=a(337),h=a(304),j=a(336);function O(e){var t=e.searchTerm,a=(e.setTekst,e.handleChoice),l=e.komkode,o=Object(n.useState)([]),i=Object(s.a)(o,2),c=i[0],d=i[1],m=Object(n.useState)(!0),u=Object(s.a)(m,2),v=(u[0],u[1]);Object(n.useEffect)((function(){if(!(t.length<3)){var e="https://dawa.aws.dk/adgangsadresser/autocomplete?q=".concat(t,"&type=adgangsadresse&side=1&per_side=105&noformat=1&kommunekode=").concat(l,"&srid=25832");console.log(e),fetch(e).then((function(e){e.json().then((function(e){d(e)}))}))}}),[t]);var g=c.map((function(e,t){return r.a.createElement(h.a,{key:"".concat(t,"-").concat(e.tekst),value:e.tekst,button:!0,onClick:function(t){return function(e){a(e),v(!1)}(e)}},r.a.createElement(j.a,{primary:e.tekst}))}));return r.a.createElement(E.a,{component:"nav",style:{maxHeight:400,overflow:"auto"}},g)}var y=a(305),S=a(352);function x(e){var t=e.size,a=e.setAdressData,l=e.komkode,o=e.adresseTekst,i=e.setAdresseTekst,c=Object(n.useState)([]),m=Object(s.a)(c,2),v=(m[0],m[1],Object(n.useState)(!0)),g=Object(s.a)(v,2),_=g[0],f=g[1],k=Object(n.useState)(""),E=Object(s.a)(k,2),h=(E[0],E[1],Object(n.useState)({tekst:"",adgangsadresse:{x:"",y:""}})),j=Object(s.a)(h,2),x=(j[0],j[1]),w=Object(n.useState)(""),D=Object(s.a)(w,2);D[0],D[1];return r.a.createElement(d.a,{item:!0,xs:t},r.a.createElement(p.a,{id:"standard-basic",InputLabelProps:{shrink:!0},label:r.a.createElement(u.a,{variant:"h6",component:"h3"},"Overnatningstedets adresse"),fullWidth:!0,value:o,onChange:function(e){f(!0),i(e.target.value)},InputProps:{endAdornment:r.a.createElement(b.a,{position:"end"},r.a.createElement(y.a,{onClick:function(e){i(""),a(""),f(!1)}},r.a.createElement(S.a,null)))}}),_&&r.a.createElement(O,{searchTerm:o,setTekst:i,handleChoice:function(e){f(!1),x(e),i(e.tekst),a(e)},komkode:l}))}var w=a(346),D=Object(c.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function A(e){var t=D(),a=e.errors,n=e.closeAlert,l=r.a.createElement("ul",null,a.map((function(e,t){return r.a.createElement("li",{key:t},e)})));return r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{severity:"error",onClose:function(){return n([])}},l))}var C=Object(c.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function z(e){var t=C(),a=e.closeAlert;return r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{severity:"success",onClose:function(){return a(!1)}},"Formular er sendt"))}var T=a(82),B={ansoeger_mail:"",ansoeger_navn:"",ansoeger_tlf:"",ansoegn_indsendt:"",ansvarl_kontaktmail:"",ansvarl_kontaktpers:"",ansvarl_kontaktlf:"",overnat_adresse:"",overnat_postnr:"",overnat_by:"",overnat_antal:"",overnat_kommune:"",overnat_lokaler:"",overnat_navn:"",overnat_over_150:!1,overnat_slut_dato:new Date,overnat_slut_tid:new Date,overnat_start_dato:new Date,overnat_start_tid:new Date,overnat_tegning:"",overnat_tegning_filnavn:"",the_geom:"",x_coord:"",y_coord:"",overnat_kontaktpers:"",overnat_kontakttlf:"",bemaerkning:""},I=r.a.createContext([{},function(){},function(){},function(){}]),q=function(e){var t=Object(n.useState)(B),a=Object(s.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(""),d=Object(s.a)(c,2),m=(d[0],d[1],function(e,t){o((function(a){return Object(i.a)(Object(i.a)({},a),{},Object(T.a)({},e,t))}))});return r.a.createElement(I.Provider,{value:[l,m,function(e){Object.keys(e).forEach((function(t){m(t,e[t])}))},function(){return o(B)}]},e.children)};function F(e){var t=e.size,a=e.id,l=e.title,o=e.type,i=(e.evtHandler,Object(n.useContext)(I)),c=Object(s.a)(i,3),m=c[0],v=c[1];c[2];return r.a.createElement(d.a,{item:!0,xs:t},r.a.createElement(p.a,{id:a,type:o||"text",value:m[a],InputLabelProps:{shrink:!0},label:r.a.createElement(u.a,{variant:"h6",component:"h3"},l),onChange:function(e){return function(e,t){v(t,e.target.value)}(e,a)},fullWidth:!0}))}var L=a(353),P=a(155),M=a.n(P);function V(e){var t,a=e.setImageSrc,l=r.a.useRef(null),o=Object(n.useContext)(I),i=Object(s.a)(o,3),c=i[0],m=i[1],v=i[2],g=c.overnat_tegning_filnavn,_=new FileReader,f=function(e){e.target.result;console.log("before setImageSrc"),a(_.result),m("overnat_tegning",_.result.replace(/^data:.+;base64,/,""))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{item:!0,xs:10},r.a.createElement(u.a,{style:{color:"rgba(0, 0, 0, 0.74)"},variant:"subtitle1",component:"h3"},"Vedh\xe6ft dokumentation: Der skal vedh\xe6ftes driftsjournal og bel\xe6gningsplan (Bel\xe6gningsplan kun for overnatninger i rum til mere end 50 personer)"," ")),r.a.createElement(d.a,{item:!0,xs:2},r.a.createElement("label",{htmlFor:"upload-photo"},r.a.createElement("input",{style:{display:"none"},id:"upload-photo",name:"upload-photo",type:"file",accept:".jpeg,.jpg,.png",onChange:function(e){console.log("file upload: ",e.target.files[0].name);var t=e.target.files[0];e.target.files[0].name;m("overnat_tegning_filnavn",e.target.files[0].name),t&&(_.onload=f,_.readAsDataURL(t))},ref:l}),r.a.createElement(y.a,{color:"primary","aria-label":"upload fil",onClick:function(e){return l.current&&l.current.click()}},r.a.createElement(M.a,null)))),r.a.createElement(d.a,{item:!0,xs:5},g&&r.a.createElement(L.a,{variant:"outlined",label:(t=g,t.length>25?"..."+t.substring(t.length-22):t),size:"medium",color:"secondary",onDelete:function(e){return v({overnat_tegning_filnavn:""}),l.current.value="",void a("")}})))}var K=a(341),N=a(349);function R(e){var t=e.size,a=e.id,l=e.title,o=e.label,i=Object(n.useContext)(I),c=Object(s.a)(i,3),m=c[0],v=c[1],g=c[2];return r.a.createElement(d.a,{item:!0,xs:t},r.a.createElement(K.a,{format:"yyyy-MM-dd",margin:"normal",id:a,label:r.a.createElement(u.a,{variant:"h6",component:"h3"},l),value:m[a],onChange:function(e){if(!(e<new Date))switch(a){case"overnat_start_dato":var t=new Date(e),n=new Date(m.overnat_slut_dato),r=n<t?t:n;g({overnat_start_dato:t,overnat_slut_dato:r,overnat_start_tid:t,overnat_slut_tid:r});break;case"overnat_slut_dato":if(new Date(e)<new Date(m.overnat_start_dato))return;v("overnat_slut_dato",new Date(e)),v("overnat_slut_tid",new Date(e));break;default:return}},KeyboardButtonProps:{"aria-label":{label:o}},cancelLabel:"Annulere"}))}function U(e){var t=e.size,a=e.id,l=e.title,o=(e.label,Object(n.useContext)(I)),i=Object(s.a)(o,3),c=i[0],m=i[1];i[2];return r.a.createElement(d.a,{item:!0,xs:t},r.a.createElement(N.a,{margin:"normal",id:a,label:r.a.createElement(u.a,{variant:"h6",component:"h3"},l),ampm:!1,value:c[a],onChange:function(e){m(a,new Date(e))},KeyboardButtonProps:{"aria-label":"\xe6ndre tidspunkt"}}))}function W(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{id:"overnat_start_dato",title:"Start dato",size:6}),r.a.createElement(U,{id:"overnat_start_tid",title:"Start tidspunkt",size:6}),r.a.createElement(R,{id:"overnat_slut_dato",title:"Slut dato",size:6}),r.a.createElement(U,{id:"overnat_slut_tid",title:"Slut tidspunkt",size:6}))}var G=a(343),H=[{value:"Aarhus",nummer:751},{value:"Odder",nummer:727},{value:"Sams\xf8",nummer:741},{value:"Skanderborg",nummer:746}];function J(e){var t=e.size,a=e.id,l=e.title,o=e.setKomkode,i=e.setAdresseTekst,c=Object(n.useContext)(I),m=Object(s.a)(c,3),v=m[0],g=(m[1],m[2]);return r.a.createElement(d.a,{item:!0,xs:t},r.a.createElement(p.a,{id:a,select:!0,value:v.overnat_kommune,InputLabelProps:{shrink:!0},label:r.a.createElement(u.a,{variant:"h6",component:"h3"},l),onChange:function(e){var t=e.target.value.split("_"),a=Object(s.a)(t,2),n=a[0];a[1];g({overnat_kommune:e.target.value,overnat_adresse:"",the_geom:""}),o(n),i("")},fullWidth:!0},H.map((function(e){return r.a.createElement(G.a,{key:e.nummer,value:"".concat(e.nummer,"_").concat(e.value)},e.value)}))))}var $=a(342);function Q(e){var t=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{item:!0,xs:2}),r.a.createElement(d.a,{item:!0,xs:8},r.a.createElement($.a,{variant:"contained",color:"primary",onClick:t},"Godkend og indsend anmeldelse om midlertidig overnatning")),r.a.createElement(d.a,{item:!0,xs:2}))}var X=a(105),Y=a.n(X),Z=Object(c.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,margin:25}}})),ee=function(e){var t=new Date(e).toISOString().split("T")[0],a=new Date(e).toTimeString().split(" ")[0];return"".concat(t," ").concat(a)};var te=function(){var e=Object(n.useContext)(I),t=Object(s.a)(e,4),a=t[0],l=t[1],o=t[2],c=t[3],p=(r.a.useRef(null),Z(),Object(n.useState)({bemaerkning:"",ansoeger_mail:"",ansoeger_navn:"",ansoeger_tlf:"",ansoegn_indsendt:"",ansvarl_kontaktmail:"",ansvarl_kontaktpers:"",ansvarl_kontaktlf:"",overnat_adresse:"",overnat_antal:"",overnat_kommune:"",overnat_lokaler:"",overnat_navn:"",overnat_over_150:!1,overnat_slut_dato:(new Date).toISOString(),overnat_slut_tid:(new Date).toISOString(),overnat_start_dato:(new Date).toISOString(),overnat_start_tid:(new Date).toISOString(),overnat_tegning:"",overnat_tegning_filnavn:"",the_geom:"",gid:"",file:""})),b=Object(s.a)(p,2),E=(b[0],b[1],k.b().shape({overnat_kommune:k.c().required("V\xe6lg kommune, for at kunne v\xe6lge adresse"),overnat_adresse:k.c().required("Overnatningstedets adresse er et kr\xe6vet felt"),overnat_navn:k.c().required("Overnatningstedets navn er et kr\xe6vet felt"),overnat_lokaler:k.c().required("Lokaler er et kr\xe6vet felt"),overnat_over_150:k.c().required(),overnat_antal:k.a("Maksimalt antal overnattende skal udfyldes med et tal").typeError("Maksimalt antal overnattende skal udfyldes med et tal").positive("Maksimalt antal overnattende skal udfyldes med et positivt tal.").integer("Maksimalt antal overnattende skal udfyldes med et tal"),ansoeger_navn:k.c().required("Anmelder navn er et kr\xe6vet felt"),ansoeger_tlf:k.c().matches(/^[0-9]{8}$/,"Anmelder tlf. skal have 8 tal"),ansoeger_mail:k.c().email("Anmelder mail skal v\xe6re en valid email adresse").required("Anmelder mail er et kr\xe6vet felt"),ansvarl_kontaktpers:k.c().required("Ansvarlig navn er et kr\xe6vet felt"),ansvarl_kontaktlf:k.c().matches(/^[0-9]{8}$/,"Ansvarlig tlf. skal have 8 tal"),ansvarl_kontaktmail:k.c().email("Ansvarlig mail skal v\xe6re en valid email adresse").required("Ansvarlig mail er et kr\xe6vet felt"),overnat_slut_dato:k.c().required(),overnat_slut_tid:k.c().required(),overnat_start_dato:k.c().required(),overnat_start_tid:k.c().required()})),h=Object(n.useState)("751|741|727|746"),j=Object(s.a)(h,2),O=j[0],y=j[1],S=Object(n.useState)(""),w=Object(s.a)(S,2),D=(w[0],w[1]),C=Object(n.useState)([]),T=Object(s.a)(C,2),B=T[0],q=T[1],L=Object(n.useState)(!1),P=Object(s.a)(L,2),M=P[0],K=P[1],N=Object(n.useState)(""),R=Object(s.a)(N,2),U=R[0],G=R[1];return r.a.createElement(f.a,{utils:g.a,locale:_.a},r.a.createElement(m.a,{maxWidth:"sm"},r.a.createElement(u.a,{variant:"h6",gutterBottom:!0},"Anmeldelse af midlertidig overnatning"),B.length>0&&r.a.createElement(A,{errors:B,closeAlert:q}),M&&r.a.createElement(z,{closeAlert:K}),r.a.createElement(d.a,{container:!0,spacing:3},r.a.createElement(J,{size:12,id:"overnat_kommune",title:"Hvilken kommune",setKomkode:y,setAdresseTekst:G}),r.a.createElement(x,{size:12,setAdressData:function(e){if(""===e)o({overnat_adresse:"",overnat_postnr:"",overnat_by:"",the_geom:"",x_coord:"",y_coord:""});else{var t=e.tekst.split(","),a=t.length>0?t[0]:e.tekst;o({overnat_adresse:a,overnat_postnr:e.adgangsadresse.postnr,overnat_by:e.adgangsadresse.postnrnavn,the_geom:"ST_setsrid(ST_MakePoint(".concat(e.adgangsadresse.x,",").concat(e.adgangsadresse.y,"),25832)"),x_coord:e.adgangsadresse.x,y_coord:e.adgangsadresse.y})}},komkode:O,adresseTekst:U,setAdresseTekst:G}),r.a.createElement(F,{size:12,id:"overnat_navn",title:"Overnatningstedets navn"}),r.a.createElement(F,{size:12,id:"overnat_lokaler",title:"Lokaler (navn p\xe5 de lokaler overnatningen foreg\xe5r i)"}),r.a.createElement(d.a,{item:!0,xs:8},r.a.createElement(u.a,{style:{color:"rgba(0, 0, 0, 0.74)"},variant:"subtitle1",component:"h3"},"Overnatning for flere end 50 i samme rum"," ")),r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(v.a,{color:"primary",checked:a.overnat_over_150,onChange:function(e){console.log("handleCheckbox => ",e.target.value),l("overnat_over_150",e.target.checked)}})),a.overnat_over_150&&r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(u.a,{style:{color:"rgba(0, 0, 0, 0.74)",fontSize:"0.9em"}},"Overnatninger i rum til mere end 50 personer skal ske efter en bel\xe6gningsplan, s\xe5 det sikres, at de forn\xf8dne flugtvejspassager til udgangsd\xf8re ikke sp\xe6rres af sovepladser, inventar, bagage m.m. Bel\xe6gningsplanen skal oph\xe6nges i overnatningslokalet. Bel\xe6gningsplaner til rum for midlertidig overnatning kan udf\xf8res som beskrevet i bilag 11d og 13 til vejledningen.",r.a.createElement("p",null,r.a.createElement("a",{href:"https://bygningsreglementet.dk/-/media/Br/Kap_5_Brand/Vejledninger/Generel-vejledning/Bilag-11-abcde/211219-Bilag-11d-Vejledning-for-bel%C3%A6gningsplaner-ved-midlertidige-overnatning.pdf"},"Bilag 11d - Vejledning for bel\xe6gningsplaner ved midlertidig overnatning")),r.a.createElement("p",null,r.a.createElement("a",{href:"https://bygningsreglementet.dk/-/media/Br/Kap_5_Brand/Vejledninger/Bilag-13-Udfaerdigelse-af-planer-i-forhold-til-brand/Bilag-13-Udfrdigelse-af-planer-i-forhold-til-brand-ver-11.pdf"},"Bilag 13: Udf\xe6rdigelse af planer i forhold til brand")))),r.a.createElement(V,{setImageSrc:D}),r.a.createElement(F,{size:12,id:"overnat_antal",type:"number",title:"Antal overnattende"}),r.a.createElement(W,null),r.a.createElement(F,{size:12,id:"ansoeger_navn",title:"Anmelder navn"}),r.a.createElement(F,{type:"number",size:6,id:"ansoeger_tlf",title:"Anmelder tlf."}),r.a.createElement(F,{size:6,id:"ansoeger_mail",title:"Anmelder mail"}),r.a.createElement(d.a,{item:!0,xs:12}),r.a.createElement(F,{size:12,id:"ansvarl_kontaktpers",title:"Navn p\xe5 kontaktperson under overnatningen"}),r.a.createElement(F,{type:"number",size:6,id:"ansvarl_kontaktlf",title:"Tlf. til kontaktperson"}),r.a.createElement(F,{size:6,id:"ansvarl_kontaktmail",title:"Mail til kontaktperson"}),r.a.createElement(F,{size:12,id:"bemaerkning",title:"Bem\xe6rkninger"}),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(u.a,{style:{color:"rgba(0, 0, 0, 0.74)",fontSize:"0.9em"}},"Den ansvarlige for overnatningen forpligter sig til at overholde kravene i Bygningsreglementet \xa7 152 a samt tilh\xf8rende vejledninger:",r.a.createElement("p",null,"1. Der er tale om kortvarigt ophold p\xe5 op til 5 d\xf8gn."),r.a.createElement("p",null,"2. Der er tilstr\xe6kkelige alarmerings-, evakuerings- og redningsmuligheder."),r.a.createElement("p",null,"3. Der i byggeri, hvor der midlertidigt overnatter mere end 150 personer, skal v\xe6re mindst \xe9n fast v\xe5gen vagt."),r.a.createElement("p",null,"4. Der udarbejdes en driftsplan efter bestemmelserne i \xa7 83, som sikrer, at der opn\xe5s et sikkerhedsniveau som beskrevet i \xa7 82."),r.a.createElement("p",null,"5. Der er udarbejdet ordensregler om forebyggelse af brand."),r.a.createElement("p",null,"6. Der er udarbejdet en brand- og evakueringsinstruks."),r.a.createElement("p",null,"7. Der er udarbejdet en bel\xe6gningsplan for lokaler, hvor der overnatter mere end 50 personer."))),r.a.createElement(Q,{onClick:function(e){var t=Object(i.a)(Object(i.a)({},a),{},{ansoegn_indsendt:new Date});console.log("ans\xf8gning",t),E.validate(t,{abortEarly:!1}).then((function(e){!function(e){var t=Object.keys(e),a=t.join(","),n=t.map((function(t){return"overnat_start_dato"===t||"overnat_slut_dato"===t||"overnat_start_tid"===t||"ansoegn_indsendt"===t||"overnat_slut_tid"===t?"'".concat(ee(e[t]),"'"):"the_geom"===t?"".concat(e[t]):"'".concat(e[t],"'")})).join(",");"INSERT INTO faelles.midlertidig_overnatning(".concat(a,") VALUES(").concat(n,")")}(t);(function(e){return e.overnat_over_150=e.overnat_over_150.toString(),Y.a.post("https://geocloud.beredskabskort.dk/extensions/beredskab/controller/formular",e)})(t).then((function(e){K(!0),q([]),G(""),y("751|741|727|746"),c(),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(e){q(["Der var fejl ved indsending..."]),K(!1),window.scrollTo({top:0,behavior:"smooth"})}))})).catch((function(e){console.log(e.errors),q(e.errors),window.scrollTo({top:0,behavior:"smooth"})}))}}))))};a(302);var ae=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(q,null,r.a.createElement(te,null)))},ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,354)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,l=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),l(e),o(e)}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),ne()}},[[171,1,2]]]);
//# sourceMappingURL=main.4967ff88.chunk.js.map